<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Library Dashboard</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Iconify -->
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 20px;
        }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #475569;
        }
        .prompt-card {
            transition: all 0.2s ease;
        }
        .prompt-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .sidebar-collapsed {
            width: 80px !important;
        }
        .sidebar-collapsed .sidebar-text {
            display: none !important;
        }
        .sidebar-collapsed .logo-text {
            display: none !important;
        }
        .sidebar-collapsed .user-text {
            display: none !important;
        }
        .sidebar-expanded {
            width: 256px !important;
        }
        .copy-notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #0ea5e9;
            color: white;
            padding: 10px 20px;
            border-radius: 6px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }
        .copy-notification.show {
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-200">
    <!-- Copy Notification -->
    <div class="copy-notification" id="copy-notification">
        Prompt copied to clipboard!
    </div>

    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <div id="sidebar" class="sidebar-expanded bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col h-full transition-all duration-300">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between">
                <h1 class="text-xl font-bold text-primary-600 dark:text-primary-400 logo-text">Prompt Library</h1>
                <button id="sidebar-toggle" class="p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700">
                    <iconify-icon icon="mdi:chevron-double-left" class="text-xl"></iconify-icon>
                </button>
            </div>
            <nav class="flex-1 p-4 space-y-2 overflow-y-auto custom-scrollbar">
                <a href="#" data-tab="home" class="tab-link flex items-center p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-primary-600 dark:text-primary-400">
                    <iconify-icon icon="mdi:home" class="text-xl mr-3"></iconify-icon>
                    <span class="sidebar-text">Home</span>
                </a>
                <a href="#" data-tab="explore" class="tab-link flex items-center p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                    <iconify-icon icon="mdi:compass" class="text-xl mr-3"></iconify-icon>
                    <span class="sidebar-text">Explore</span>
                </a>
                <a href="#" data-tab="favorites" class="tab-link flex items-center p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700">
                    <iconify-icon icon="mdi:heart" class="text-xl mr-3"></iconify-icon>
                    <span class="sidebar-text">Favorites</span>
                </a>
            </nav>
            <div class="p-4 border-t border-gray-200 dark:border-gray-700">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="w-8 h-8 rounded-full bg-primary-500 flex items-center justify-center text-white">
                            U
                        </div>
                        <div class="ml-2 user-text">
                            <p class="text-sm font-medium">Username</p>
                        </div>
                    </div>
                    <button id="theme-toggle">
                        <iconify-icon icon="mdi:weather-night" class="text-xl dark:hidden"></iconify-icon>
                        <iconify-icon icon="mdi:white-balance-sunny" class="text-xl hidden dark:block"></iconify-icon>
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header class="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4">
                <div class="flex items-center justify-between">
                    <div class="relative w-1/3">
                        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                            <iconify-icon icon="mdi:magnify" class="text-gray-400"></iconify-icon>
                        </div>
                        <input type="text" id="search-input" class="bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full pl-10 p-2.5" placeholder="Search prompts...">
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <button id="filter-toggle" class="flex items-center space-x-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg px-4 py-2.5">
                                <iconify-icon icon="mdi:filter"></iconify-icon>
                                <span>Filter</span>
                            </button>
                            <div id="filter-dropdown" class="hidden absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10 p-4">
                                <input type="text" id="tag-search" class="bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white rounded-lg block w-full p-2.5 mb-3" placeholder="Search tags...">
                                <div class="max-h-60 overflow-y-auto custom-scrollbar">
                                    <div class="flex flex-wrap gap-2" id="tags-container">
                                        <!-- Tags will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1">
                            <button id="card-view" class="p-2 rounded-md bg-white dark:bg-gray-600 shadow-sm">
                                <iconify-icon icon="mdi:view-grid"></iconify-icon>
                            </button>
                            <button id="grid-view" class="p-2 rounded-md">
                                <iconify-icon icon="mdi:view-agenda"></iconify-icon>
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <main class="flex-1 overflow-y-auto p-6 bg-gray-50 dark:bg-gray-900 custom-scrollbar">
                <div id="prompts-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Prompt cards will be populated by JavaScript -->
                </div>
            </main>
        </div>
    </div>

    <!-- Prompt Detail Modal -->
    <div id="prompt-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                    <h3 id="modal-title" class="text-xl font-semibold"></h3>
                    <button id="close-modal">
                        <iconify-icon icon="mdi:close" class="text-xl"></iconify-icon>
                    </button>
                </div>
            </div>
            <div class="p-6 overflow-y-auto custom-scrollbar flex-1">
                <div class="flex flex-wrap gap-2 mb-4" id="modal-tags"></div>
                <p id="modal-description" class="text-gray-600 dark:text-gray-300 mb-6"></p>
                <div class="bg-gray-100 dark:bg-gray-700 rounded-lg p-4 relative">
                    <button id="modal-copy" class="absolute top-3 right-3 bg-white dark:bg-gray-600 p-2 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500">
                        <iconify-icon icon="mdi:content-copy" class="text-lg"></iconify-icon>
                    </button>
                    <pre id="modal-prompt" class="whitespace-pre-wrap text-sm"></pre>
                </div>
            </div>
            <div class="p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end">
                <button id="modal-favorite" class="flex items-center space-x-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg px-4 py-2.5">
                    <iconify-icon icon="mdi:heart-outline" class="text-xl"></iconify-icon>
                    <span>Add to Favorites</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Sample data (replace with your actual prompt.json)
        const promptData = {
            "patterns": [
                {
                    "id": "LinkedId_message",
                    "description": "Craft personalized LinkedIn messages for job recruitment purposes",
                    "tags": ["LinkedIn", "Recruitment", "Job Search"],
                    "system": "# IDENTITY and PURPOSE\n\nYou are an AI assistant whose primary responsibility is to carefully interpret prompts related to generating tailored LinkedIn messages for job recruitment purposes. You must deeply understand the user's input, which includes a job description and additional context about the user's situation, and then produce a personalized, engaging LinkedIn message designed to intrigue potential recruiters."
                },
                {
                    "id": "agility_story",
                    "description": "Generate agile user stories and acceptance criteria following agile formats.",
                    "tags": ["DEVELOPMENT", "Agile", "User Stories"],
                    "system": "# IDENTITY and PURPOSE\n\nYou are an expert in the Agile framework. You deeply understand user story and acceptance criteria creation. You will be given a topic. Please write the appropriate information for what is requested."
                },
                {
                    "id": "ai_analysis",
                    "description": "Provide concise, insightful answers in brief bullets focused on core concepts.",
                    "tags": ["AI", "ANALYSIS", "Briefing"],
                    "system": "# IDENTITY and PURPOSE\n\nYou are an AI analysis expert. You provide concise, insightful answers in brief bullets focused on core concepts."
                },
                {
                    "id": "content_rewrite",
                    "description": "Rewrite content for clarity, conciseness, and impact.",
                    "tags": ["Writing", "Content", "Editing"],
                    "system": "# IDENTITY and PURPOSE\n\nYou are a content rewriting expert. You take existing content and improve it for clarity, conciseness, and impact while maintaining the original meaning."
                },
                {
                    "id": "email_composition",
                    "description": "Compose professional emails for various business scenarios.",
                    "tags": ["Email", "Business", "Communication"],
                    "system": "# IDENTITY and PURPOSE\n\nYou are an expert email composer. You create professional, effective emails for various business scenarios including outreach, follow-ups, and internal communications."
                },
                {
                    "id": "code_review",
                    "description": "Analyze code for improvements, bugs, and best practices.",
                    "tags": ["Programming", "Code Review", "Best Practices"],
                    "system": "# IDENTITY and PURPOSE\n\nYou are an expert code reviewer. You analyze code for improvements, bugs, and best practices while providing constructive feedback."
                },
                {
                    "id": "summary_generator",
                    "description": "Create concise summaries from longer pieces of text.",
                    "tags": ["Writing", "Summarization", "Analysis"],
                    "system": "# IDENTITY and PURPOSE\n\nYou are a summary generation expert. You create concise, accurate summaries from longer pieces of text while preserving the key information and context."
                }
            ]
        };

        // DOM Elements
        const themeToggle = document.getElementById('theme-toggle');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebar = document.getElementById('sidebar');
        const filterToggle = document.getElementById('filter-toggle');
        const filterDropdown = document.getElementById('filter-dropdown');
        const tagSearch = document.getElementById('tag-search');
        const tagsContainer = document.getElementById('tags-container');
        const searchInput = document.getElementById('search-input');
        const cardViewBtn = document.getElementById('card-view');
        const gridViewBtn = document.getElementById('grid-view');
        const promptsContainer = document.getElementById('prompts-container');
        const promptModal = document.getElementById('prompt-modal');
        const closeModal = document.getElementById('close-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalTags = document.getElementById('modal-tags');
        const modalDescription = document.getElementById('modal-description');
        const modalPrompt = document.getElementById('modal-prompt');
        const modalFavorite = document.getElementById('modal-favorite');
        const modalCopy = document.getElementById('modal-copy');
        const copyNotification = document.getElementById('copy-notification');
        const tabLinks = document.querySelectorAll('.tab-link');

        // State
        let currentView = 'card';
        let currentPromptId = null;
        let favorites = JSON.parse(localStorage.getItem('favorites')) || [];
        let selectedTags = [];
        let allTags = [];
        let currentTab = 'explore';
        let sidebarCollapsed = false;

        // Initialize the app
        function init() {
            loadPrompts();
            extractAllTags();
            renderTags();
            setupEventListeners();
        }

        // Extract all unique tags from prompts
        function extractAllTags() {
            const tagsSet = new Set();
            promptData.patterns.forEach(prompt => {
                prompt.tags.forEach(tag => tagsSet.add(tag));
            });
            allTags = Array.from(tagsSet).sort();
        }

        // Render tags in the filter dropdown
        function renderTags() {
            tagsContainer.innerHTML = '';
            allTags.forEach(tag => {
                const isSelected = selectedTags.includes(tag);
                const tagElement = document.createElement('div');
                tagElement.className = `px-3 py-1 rounded-full text-sm flex items-center cursor-pointer ${isSelected ? 'bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200' : 'bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600'}`;
                tagElement.innerHTML = `
                    <span>${tag}</span>
                    ${isSelected ? '<iconify-icon icon="mdi:check" class="ml-1"></iconify-icon>' : ''}
                `;
                tagElement.addEventListener('click', () => toggleTag(tag));
                tagsContainer.appendChild(tagElement);
            });
        }

        // Toggle tag selection
        function toggleTag(tag) {
            if (selectedTags.includes(tag)) {
                selectedTags = selectedTags.filter(t => t !== tag);
            } else {
                selectedTags.push(tag);
            }
            renderTags();
            loadPrompts();
        }

        // Load and display prompts based on filters
        function loadPrompts() {
            const searchTerm = searchInput.value.toLowerCase();
            
            let filteredPrompts = promptData.patterns.filter(prompt => {
                // Filter by search term
                const matchesSearch = prompt.id.toLowerCase().includes(searchTerm) || 
                                    prompt.description.toLowerCase().includes(searchTerm) ||
                                    prompt.tags.some(tag => tag.toLowerCase().includes(searchTerm));
                
                // Filter by selected tags
                const matchesTags = selectedTags.length === 0 || 
                                  selectedTags.every(tag => prompt.tags.includes(tag));
                
                return matchesSearch && matchesTags;
            });

            // Apply tab filter
            if (currentTab === 'favorites') {
                filteredPrompts = filteredPrompts.filter(prompt => favorites.includes(prompt.id));
            }

            renderPrompts(filteredPrompts);
        }

        // Render prompts in the current view
        function renderPrompts(prompts) {
            promptsContainer.innerHTML = '';
            
            if (prompts.length === 0) {
                promptsContainer.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <iconify-icon icon="mdi:inbox-remove" class="text-4xl text-gray-400 mb-4"></iconify-icon>
                        <p class="text-gray-500 dark:text-gray-400">No prompts found. Try adjusting your filters.</p>
                    </div>
                `;
                return;
            }
            
            prompts.forEach(prompt => {
                const isFavorite = favorites.includes(prompt.id);
                
                const promptElement = document.createElement('div');
                promptElement.className = `prompt-card bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden flex flex-col ${currentView === 'grid' ? 'h-40' : ''}`;
                
                promptElement.innerHTML = `
                    <div class="p-5 flex-1">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-semibold text-lg">${prompt.id}</h3>
                            <div class="flex space-x-2">
                                <button class="copy-prompt-btn text-gray-400 hover:text-gray-600 dark:hover:text-gray-200" title="Copy Prompt">
                                    <iconify-icon icon="mdi:content-copy" class="text-lg"></iconify-icon>
                                </button>
                                <button class="favorite-btn text-xl ${isFavorite ? 'text-red-500' : 'text-gray-300 dark:text-gray-500 hover:text-red-400'}" title="${isFavorite ? 'Remove from Favorites' : 'Add to Favorites'}">
                                    <iconify-icon icon="${isFavorite ? 'mdi:heart' : 'mdi:heart-outline'}"></iconify-icon>
                                </button>
                            </div>
                        </div>
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${prompt.tags.map(tag => `
                                <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs">${tag}</span>
                            `).join('')}
                        </div>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4 ${currentView === 'grid' ? 'truncate' : ''}">${prompt.description}</p>
                    </div>
                    <div class="px-5 pb-5">
                        <button class="view-prompt-btn w-full bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg py-2 text-sm font-medium">
                            Show Prompt
                        </button>
                    </div>
                `;
                
                promptsContainer.appendChild(promptElement);
                
                // Add event listeners to the buttons
                promptElement.querySelector('.favorite-btn').addEventListener('click', () => toggleFavorite(prompt.id));
                promptElement.querySelector('.view-prompt-btn').addEventListener('click', () => showPromptDetail(prompt.id));
                promptElement.querySelector('.copy-prompt-btn').addEventListener('click', () => copyToClipboard(prompt.system));
            });
        }

        // Toggle favorite status
        function toggleFavorite(promptId) {
            if (favorites.includes(promptId)) {
                favorites = favorites.filter(id => id !== promptId);
            } else {
                favorites.push(promptId);
            }
            
            // Save to localStorage
            localStorage.setItem('favorites', JSON.stringify(favorites));
            
            // Reload prompts to update UI
            loadPrompts();
            
            // If modal is open for this prompt, update the favorite button
            if (currentPromptId === promptId) {
                const isFavorite = favorites.includes(promptId);
                modalFavorite.innerHTML = `
                    <iconify-icon icon="${isFavorite ? 'mdi:heart' : 'mdi:heart-outline'}" class="text-xl ${isFavorite ? 'text-red-500' : ''}"></iconify-icon>
                    <span>${isFavorite ? 'Remove from Favorites' : 'Add to Favorites'}</span>
                `;
            }
        }

        // Show prompt detail in modal
        function showPromptDetail(promptId) {
            const prompt = promptData.patterns.find(p => p.id === promptId);
            if (!prompt) return;
            
            currentPromptId = promptId;
            const isFavorite = favorites.includes(promptId);
            
            modalTitle.textContent = prompt.id;
            modalDescription.textContent = prompt.description;
            modalPrompt.textContent = prompt.system;
            
            // Render tags
            modalTags.innerHTML = '';
            prompt.tags.forEach(tag => {
                const tagElement = document.createElement('span');
                tagElement.className = 'px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full text-xs';
                tagElement.textContent = tag;
                modalTags.appendChild(tagElement);
            });
            
            // Update favorite button
            modalFavorite.innerHTML = `
                <iconify-icon icon="${isFavorite ? 'mdi:heart' : 'mdi:heart-outline'}" class="text-xl ${isFavorite ? 'text-red-500' : ''}"></iconify-icon>
                <span>${isFavorite ? 'Remove from Favorites' : 'Add to Favorites'}</span>
            `;
            
            // Show modal
            promptModal.classList.remove('hidden');
        }

        // Copy text to clipboard
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Show notification
                copyNotification.classList.add('show');
                setTimeout(() => {
                    copyNotification.classList.remove('show');
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
            });
        }

        // Toggle sidebar collapse
        function toggleSidebar() {
            sidebarCollapsed = !sidebarCollapsed;
            if (sidebarCollapsed) {
                sidebar.classList.remove('sidebar-expanded');
                sidebar.classList.add('sidebar-collapsed');
                sidebarToggle.innerHTML = '<iconify-icon icon="mdi:chevron-double-right" class="text-xl"></iconify-icon>';
            } else {
                sidebar.classList.remove('sidebar-collapsed');
                sidebar.classList.add('sidebar-expanded');
                sidebarToggle.innerHTML = '<iconify-icon icon="mdi:chevron-double-left" class="text-xl"></iconify-icon>';
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Theme toggle
            themeToggle.addEventListener('click', () => {
                document.documentElement.classList.toggle('dark');
            });
            
            // Sidebar toggle
            sidebarToggle.addEventListener('click', toggleSidebar);
            
            // Filter dropdown toggle
            filterToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                filterDropdown.classList.toggle('hidden');
            });
            
            // Close filter dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!filterToggle.contains(e.target) && !filterDropdown.contains(e.target)) {
                    filterDropdown.classList.add('hidden');
                }
            });
            
            // Tag search
            tagSearch.addEventListener('input', () => {
                const searchTerm = tagSearch.value.toLowerCase();
                const tagElements = tagsContainer.querySelectorAll('div');
                
                tagElements.forEach(tagElement => {
                    const tagText = tagElement.querySelector('span').textContent.toLowerCase();
                    if (tagText.includes(searchTerm)) {
                        tagElement.style.display = 'flex';
                    } else {
                        tagElement.style.display = 'none';
                    }
                });
            });
            
            // Search input
            searchInput.addEventListener('input', loadPrompts);
            
            // View toggle
            cardViewBtn.addEventListener('click', () => {
                if (currentView !== 'card') {
                    currentView = 'card';
                    cardViewBtn.classList.add('bg-white', 'dark:bg-gray-600', 'shadow-sm');
                    gridViewBtn.classList.remove('bg-white', 'dark:bg-gray-600', 'shadow-sm');
                    loadPrompts();
                }
            });
            
            gridViewBtn.addEventListener('click', () => {
                if (currentView !== 'grid') {
                    currentView = 'grid';
                    gridViewBtn.classList.add('bg-white', 'dark:bg-gray-600', 'shadow-sm');
                    cardViewBtn.classList.remove('bg-white', 'dark:bg-gray-600', 'shadow-sm');
                    loadPrompts();
                }
            });
            
            // Modal events
            closeModal.addEventListener('click', () => {
                promptModal.classList.add('hidden');
            });
            
            modalFavorite.addEventListener('click', () => {
                if (currentPromptId) {
                    toggleFavorite(currentPromptId);
                }
            });
            
            modalCopy.addEventListener('click', () => {
                if (currentPromptId) {
                    const prompt = promptData.patterns.find(p => p.id === currentPromptId);
                    if (prompt) {
                        copyToClipboard(prompt.system);
                    }
                }
            });
            
            // Close modal when clicking outside
            promptModal.addEventListener('click', (e) => {
                if (e.target === promptModal) {
                    promptModal.classList.add('hidden');
                }
            });
            
            // Tab navigation
            tabLinks.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabName = tab.getAttribute('data-tab');
                    
                    // Update active tab
                    tabLinks.forEach(t => t.classList.remove('text-primary-600', 'dark:text-primary-400'));
                    tab.classList.add('text-primary-600', 'dark:text-primary-400');
                    
                    // Update current tab and reload prompts
                    currentTab = tabName;
                    loadPrompts();
                });
            });
        }

        // Initialize the app when the DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>